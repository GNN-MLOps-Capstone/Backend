#!/bin/bash
# ==============================================================================
# 컨테이너 시작 스크립트 (entrypoint.sh)
# ==============================================================================
#
# 이 스크립트는 Docker 컨테이너가 시작될 때 실행됩니다.
# PostgreSQL 원격 DB에 연결하여 API 서버를 시작합니다.
#
# ==============================================================================

set -e

echo "Starting News API..."
# DATABASE_URL에서 비밀번호 마스킹 (보안)
MASKED_URL=$(echo "$DATABASE_URL" | sed 's|://[^:]*:[^@]*@|://****:****@|')
echo "Database: $MASKED_URL"

# -----------------------------------------------------------------------------
# 서버 시작
# -----------------------------------------------------------------------------
exec uvicorn app.main:app --host 0.0.0.0 --port 8000
